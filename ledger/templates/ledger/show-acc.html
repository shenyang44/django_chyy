{% extends 'ledger/layout.html' %}
{% block title %}{{account.file_no}}{% endblock %}

{% block body %}
<header class="d-flex justify-content-evenly fs-4 fw-bold my-3">
    <div>File No: {{account.file_no}}</div>
    <div>Name: {{account.name}}</div>
</header>

<table class="table">
    <colgroup>
        <col style="width:70%">
        <col style="width:15%">
        <col style="width: 15%;">
    </colgroup>
    <thead>
        <tr>
            <th scope="col">Date</th>
            <th class="text-center" scope="col">Debit</th>
            <th class="text-center" scope="col">Credit</th>
        </tr>
    </thead>
    <tbody>
    {% for trans in transactions %}
        <tr class="transRow">
            <td>
                <div class="d-flex justify-content-between">
                    <div>{{trans.created_at|date:"j. n. Y"}}</div>
                    <div class=" d-flex w-50 justify-content-end">
                        <div style="width: 40%; text-align: center;" >
                            {% if not trans.payee.is_external %}
                                <a href="{% url 'ledger:voucher' trans.id %}"><button type="button" class="btn btn-secondary">View voucher</button></a>
                            {% endif %}
                        </div>
                        
                        <div style="width: 40%; text-align: center;">
                            {% if not trans.receiver.is_external %}
                                <a href="{% url 'ledger:receipt' trans.id %}"><button type="button" class="btn btn-secondary">View receipt</button></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </td>
            <td class="text-center">{% if trans.payee.file_no == account.file_no %}{{trans.total}} {% endif %}</td>
            <td class="text-center">{% if trans.receiver.file_no == account.file_no %}{{trans.total}}{% endif %}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
<div class="text-center">Account Balance: RM {{account.balance}}</div>
<br>

<a href='{% url "ledger:create_trans" account.id %}'><button type="button" class="btn btn-success">New Transaction</button></a>
{% endblock %}